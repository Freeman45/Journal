<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PRO Betting Tracker | 0‚Äì5 Mins</title>
  <link href="https://fonts.googleapis.com" rel="stylesheet">
  <style>
    :root {
      --pitch-dark: #0f172a;
      --league-purple: #38003c; /* Premier League Purple */
      --win-green: #00ff85;     /* Electric Green */
      --loss-red: #e90052;      /* Razzmatazz Red */
      --gold: #ffcf00;
      --glass: rgba(255, 255, 255, 0.05);
    }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, var(--league-purple), var(--pitch-dark));
      background-attachment: fixed;
      color: #f8fafc;
      margin: 0; padding: 20px;
    }

    .container { max-width: 1100px; margin: 0 auto; }
    h1 { font-family: 'Oswald', sans-serif; text-transform: uppercase; text-align: center; letter-spacing: 2px; margin-bottom: 30px; }
    h1 span { color: var(--win-green); }

    /* SCOREBOARD */
    .summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 15px; margin-bottom: 30px; }
    .stat-card { background: var(--glass); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); padding: 20px; border-radius: 12px; text-align: center; }
    .stat-label { font-size: 0.75rem; text-transform: uppercase; color: #94a3b8; margin-bottom: 5px; }
    .stat-value { font-family: 'Oswald', sans-serif; font-size: 1.6rem; }

    /* FORMS */
    .form-box { background: var(--glass); backdrop-filter: blur(10px); padding: 20px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 30px; }
    .input-group { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
    input, select { background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); padding: 12px; border-radius: 8px; color: white; flex: 1; min-width: 140px; }
    
    /* BUTTONS */
    .btn { padding: 12px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; text-transform: uppercase; transition: 0.3s; }
    .btn-main { background: var(--win-green); color: var(--league-purple); }
    .btn-sub { background: var(--glass); color: white; border: 1px solid rgba(255,255,255,0.2); }
    .btn-gold { background: var(--gold); color: black; }
    .btn:hover { opacity: 0.8; transform: translateY(-2px); }

    /* TABLES */
    .table-container { background: var(--glass); border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); overflow-x: auto; margin-top: 10px; }
    table { width: 100%; border-collapse: collapse; text-align: left; }
    th { padding: 15px; font-family: 'Oswald', sans-serif; text-transform: uppercase; font-size: 0.8rem; color: #94a3b8; border-bottom: 2px solid rgba(255,255,255,0.1); }
    td { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 0.9rem; }
    .profit { color: var(--win-green); font-weight: bold; }
    .loss { color: var(--loss-red); font-weight: bold; }

    /* DATA ACTIONS BAR */
    .actions-bar { display: flex; justify-content: flex-end; gap: 10px; margin-bottom: 10px; }
    #importInput { display: none; }
  </style>
</head>
<body>

<div class="container">
  <h1>‚öΩ TRACKER<span>PRO</span></h1>

  <!-- SCOREBOARD -->
  <div class="summary">
    <div class="stat-card"><div class="stat-label">Total Matches</div><div class="stat-value" id="totalBets">0</div></div>
    <div class="stat-card"><div class="stat-label">Total Profit</div><div class="stat-value" style="color: var(--win-green)">‚Ç¶<span id="totalProfit">0.00</span></div></div>
    <div class="stat-card"><div class="stat-label">Withdrawn</div><div class="stat-value" style="color: var(--gold)">‚Ç¶<span id="totalWithdrawn">0.00</span></div></div>
    <div class="stat-card"><div class="stat-label">Net Balance</div><div class="stat-value" id="netBalance">‚Ç¶0.00</div></div>
    <div class="stat-card"><div class="stat-label">Win Rate</div><div class="stat-value" id="winRate">0%</div></div>
  </div>

  <!-- ADD BET -->
  <div class="form-box">
    <h3 style="margin-top:0; color: var(--win-green); font-family: 'Oswald';">LOG NEW FIXTURE</h3>
    <div class="input-group">
      <input type="date" id="date">
      <input type="text" id="match" placeholder="Fixture (e.g. ARS vs MCI)">
      <input type="number" id="prob" placeholder="Prob %">
      <input type="number" id="odds" placeholder="Odds" step="0.01">
      <input type="number" id="stake" placeholder="Stake (‚Ç¶)">
      <select id="result">
        <option value="">Full Time Result</option>
        <option value="Win">‚úÖ Win (No Goal 0-5')</option>
        <option value="Loss">‚ùå Loss (Goal Scored)</option>
      </select>
      <button class="btn btn-main" onclick="addBet()">Add Record</button>
    </div>
  </div>

  <!-- HISTORY ACTIONS -->
  <div class="actions-bar">
    <button class="btn btn-sub" onclick="document.getElementById('importInput').click()">üìÇ Import Backup</button>
    <button class="btn btn-gold" onclick="exportToCSV()">üì• Download CSV</button>
    <input type="file" id="importInput" accept=".csv" onchange="importCSV(event)">
  </div>

  <!-- TABLE -->
  <div class="table-container">
    <table id="betTable">
      <thead>
        <tr><th>Date</th><th>Fixture</th><th>Prob%</th><th>Odds</th><th>Stake</th><th>Result</th><th>Profit/Loss</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <br>

  <!-- WITHDRAWALS -->
  <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 20px;">
    <div class="form-box">
      <h3 style="margin-top:0; color: var(--gold); font-family: 'Oswald';">CASH OUT</h3>
      <div style="display: flex; flex-direction: column; gap: 10px;">
        <input type="date" id="wDate">
        <input type="number" id="wAmount" placeholder="Amount (‚Ç¶)">
        <input type="text" id="wNote" placeholder="Note (Optional)">
        <button class="btn btn-sub" onclick="addWithdrawal()">Record Payout</button>
      </div>
    </div>
    <div class="table-container">
      <table id="withdrawTable">
        <thead><tr><th>Date</th><th>Amount</th><th>Note</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>

<script>
  let bets = JSON.parse(localStorage.getItem("bets")) || [];
  let withdrawals = JSON.parse(localStorage.getItem("withdrawals")) || [];

  function saveData() {
    localStorage.setItem("bets", JSON.stringify(bets));
    localStorage.setItem("withdrawals", JSON.stringify(withdrawals));
  }

  function addBet() {
    const fields = ['date', 'match', 'prob', 'odds', 'stake', 'result'];
    const data = {};
    for (let f of fields) {
      data[f] = document.getElementById(f).value;
      if (!data[f]) { alert("Fill all match details!"); return; }
    }
    
    let profit = (data.result === "Win") ? (data.stake * data.odds - data.stake) : -data.stake;
    bets.push({ ...data, profit: parseFloat(profit) });
    saveData(); render(); clearForm('bet');
  }

  function addWithdrawal() {
    const date = document.getElementById("wDate").value;
    const amount = document.getElementById("wAmount").value;
    if (!date || !amount) return alert("Fill date and amount");
    
    withdrawals.push({ date, amount: parseFloat(amount), note: document.getElementById("wNote").value });
    saveData(); render(); clearForm('withdraw');
  }

  function render() {
    const bBody = document.querySelector("#betTable tbody");
    bBody.innerHTML = bets.map(b => `
      <tr>
        <td>${b.date}</td>
        <td>${b.match}</td>
        <td>${b.prob}%</td>
        <td>${b.odds}</td>
        <td>‚Ç¶${parseFloat(b.stake).toLocaleString()}</td>
        <td><span style="color: ${b.result==='Win'?'var(--win-green)':'var(--loss-red)'}">${b.result}</span></td>
        <td class="${b.profit >= 0 ? 'profit' : 'loss'}">${b.profit >= 0 ? '+' : ''}${b.profit.toFixed(2)}</td>
      </tr>
    `).join('');

    const wBody = document.querySelector("#withdrawTable tbody");
    wBody.innerHTML = withdrawals.map(w => `
      <tr><td>${w.date}</td><td>‚Ç¶${w.amount.toLocaleString()}</td><td>${w.note || '-'}</td></tr>
    `).join('');

    updateSummary();
  }

  function updateSummary() {
    const totalBets = bets.length;
    const wins = bets.filter(b => b.result === "Win").length;
    const totalProfit = bets.reduce((sum, b) => sum + parseFloat(b.profit), 0);
    const totalWithdrawn = withdrawals.reduce((sum, w) => sum + parseFloat(w.amount), 0);
    
    document.getElementById("totalBets").innerText = totalBets;
    document.getElementById("totalProfit").innerText = totalProfit.toLocaleString(undefined, {minimumFractionDigits: 2});
    document.getElementById("totalWithdrawn").innerText = totalWithdrawn.toLocaleString(undefined, {minimumFractionDigits: 2});
    document.getElementById("netBalance").innerText = "‚Ç¶" + (totalProfit - totalWithdrawn).toLocaleString(undefined, {minimumFractionDigits: 2});
    document.getElementById("winRate").innerText = totalBets > 0 ? ((wins / totalBets) * 100).toFixed(1) + "%" : "0%";
  }

  function exportToCSV() {
    let csv = "SECTION,Date,Match/Note,Prob,Odds,Stake/Amount,Result,Profit\n";
    bets.forEach(b => csv += `BET,${b.date},${b.match},${b.prob},${b.odds},${b.stake},${b.result},${b.profit}\n`);
    withdrawals.forEach(w => csv += `WITHDRAW,${w.date},${w.note || 'N/A'},,,${w.amount},,\n`);
    
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.setAttribute('href', url);
    a.setAttribute('download', `BetTracker_Backup_${new Date().toISOString().slice(0,10)}.csv`);
    a.click();
  }

  function importCSV(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
      const lines = e.target.result.split('\n').slice(1);
      const newBets = [];
      const newWithdrawals = [];
      lines.forEach(line => {
        const cols = line.split(',');
        if (cols[0] === 'BET') {
          newBets.push({ date: cols[1], match: cols[2], prob: cols[3], odds: cols[4], stake: cols[5], result: cols[6], profit: parseFloat(cols[7]) });
        } else if (cols[0] === 'WITHDRAW') {
          newWithdrawals.push({ date: cols[1], amount: parseFloat(cols[5]), note: cols[2] });
        }
      });
      if (confirm("Replace current data with backup?")) {
        bets = newBets; withdrawals = newWithdrawals;
        saveData(); render();
      }
    };
    reader.readAsText(file);
  }

  function clearForm(type) {
    if(type === 'bet') {
      ['match', 'prob', 'odds', 'stake', 'result'].forEach(id => document.getElementById(id).value = "");
    } else {
      ['wAmount', 'wNote'].forEach(id => document.getElementById(id).value = "");
    }
  }

  render();
</script>
</body>
</html>
